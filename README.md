# PDF智能处理器

一个基于React和Gemini AI的PDF文档智能处理工具，专门用于提取年报中的高管薪酬、股权激励等结构化数据。支持批量处理多个PDF文件，并提供智能数据解析和表格展示功能。

## 🌟 功能特点

- 📄 **PDF批量处理**: 支持拖拽上传多个PDF文件，批量自动处理
- 🤖 **AI智能提取**: 使用Google Gemini 2.5 Pro进行内容分析和数据提取
- 📊 **智能表格展示**: 自动生成表格显示提取结果，支持排序、搜索、分页
- 💾 **数据导出**: 一键导出CSV格式数据，方便后续分析
- 🎯 **预设模板**: 内置多种专业提示词模板，支持港股、A股不同场景
- ⚡ **实时处理状态**: 显示每个文件的处理进度和状态
- 🔄 **避免上下文混淆**: 每次处理都创建新会话，确保数据提取准确性
- 📱 **响应式设计**: 支持桌面端和移动端访问

## 🎯 适用场景

### 港股年报分析
- 高管薪酬提取：董事薪酬、股权激励、绩效奖金等
- 财务数据分析：营收、利润、资产负债等核心指标
- 公司治理信息：董事会结构、独立董事信息等

### A股股权激励分析
- 股权激励计划详情：授予价格、激励股数、行权条件等
- 激励对象信息：高管层级、激励比例、考核指标等
- 计划执行情况：实施进度、行权情况、市场表现等

### 通用文档处理
- 表格数据提取：自动识别和提取PDF中的表格数据
- 结构化信息整理：将非结构化文本转换为结构化数据
- 批量数据处理：同时处理多个相似格式的文档

## 🚀 快速开始

### 1. 项目设置
```bash
# 克隆项目
git clone https://github.com/your-username/pdf-gemini-processor.git
cd pdf-gemini-processor

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 2. 获取Gemini API密钥
1. 访问 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 登录Google账户
3. 创建新的API密钥
4. 复制API密钥备用

### 3. 开始使用
1. **配置API密钥**：点击右上角"API设置"按钮，输入您的Gemini API密钥
2. **上传PDF文件**：拖拽或点击上传一个或多个PDF文件
3. **选择提示词**：从预设模板中选择合适的提示词，或自定义处理指令
4. **开始处理**：点击"开始处理"按钮，系统将批量处理所有文件
5. **查看结果**：在表格中查看提取的结构化数据
6. **导出数据**：点击"导出CSV"保存结果到本地

## 📋 预设模板

### 港股高管薪酬提取
专门针对港股企业年报设计，能够准确提取：
- 董事会成员信息和职务
- 固定薪酬、奖金、股权激励
- 币种换算和单位标准化
- 入职离职时间

### A股股权激励计划分析
深度解析A股股权激励计划文档：
- 激励计划基本信息
- 授予价格和市场价格比较
- 激励对象层级分析
- 考核指标和行权条件

### 财务数据提取
通用财务数据提取模板：
- 资产负债表关键指标
- 利润表核心数据
- 现金流量表主要项目
- 财务比率计算

## 🛠 技术架构

### 前端技术栈
- **React 19**: 现代化的用户界面框架
- **TypeScript**: 类型安全的JavaScript超集
- **Vite**: 快速的构建工具和开发服务器
- **Tailwind CSS**: 实用优先的CSS框架
- **TanStack Table**: 功能强大的表格组件库
- **Lucide React**: 现代化的图标库

### AI服务集成
- **Google Gemini 2.5 Pro**: 先进的多模态AI模型
- **结构化数据解析**: 自动解析JSON、表格等多种格式
- **错误处理机制**: 智能重试和降级处理策略

### 项目结构
```
src/
├── components/              # React组件
│   ├── FileUploader.tsx       # 文件上传组件
│   ├── PromptEditor.tsx       # 提示词编辑器
│   ├── ResultsTable.tsx      # 结果表格展示
│   ├── ProcessingStatus.tsx   # 处理状态显示
│   ├── ApiKeyModal.tsx       # API密钥设置弹窗
│   └── QuickTest.tsx         # 快速测试组件
├── services/               # 服务层
│   └── geminiService.ts      # Gemini API集成服务
├── data/                  # 数据层
│   └── presetPrompts.ts     # 预设提示词模板
├── App.tsx               # 主应用组件
└── main.tsx             # 应用入口点

stock_downloader/         # 股票年报下载工具
├── downloader.py          # 完整版下载器
├── simple.py             # 简化版下载器
└── README.md            # 工具使用说明
```

## 📈 股票年报下载工具

项目还包含一个独立的Python工具，用于自动下载A股和港股年报：

### 快速使用
```bash
cd stock_downloader

# 下载单个股票年报
python simple.py 000001 2022

# 批量下载
python downloader.py -f codes.txt -y 2022
```

### 支持的市场
- **A股市场**: 上交所、深交所全部股票
- **港股市场**: 香港交易所主板和创业板

详细使用说明请参考 [股票下载器说明文档](./stock_downloader/README.md)。

## 🔧 高级配置

### 自定义提示词最佳实践
1. **明确输出格式**: 始终要求JSON格式输出，提供结构示例
2. **详细字段说明**: 明确每个字段的含义和提取规则
3. **数值处理规范**: 指定单位换算和数值格式要求
4. **边界情况处理**: 说明缺失数据和异常情况的处理方式

### API使用优化
1. **文件大小控制**: 建议PDF文件不超过100MB
2. **批量处理策略**: 系统自动在文件间添加延迟，避免API限制
3. **错误重试机制**: 自动重试失败的请求，提高成功率
4. **会话管理**: 每个文件使用独立会话，避免上下文污染

## 📊 部署指南

### 本地部署
```bash
# 构建生产版本
npm run build

# 预览构建结果
npm run preview
```

### Vercel部署
1. Fork项目到GitHub
2. 在Vercel中导入项目
3. 系统自动检测配置并部署
4. 无需配置环境变量（API密钥在客户端设置）

### 自定义部署
项目包含完整的部署配置文件，支持各种部署平台。详细说明请参考 [部署指南](./DEPLOYMENT_GUIDE.md)。

## ❓ 常见问题

### 使用相关
**Q: API密钥如何存储？**  
A: API密钥仅存储在浏览器localStorage中，不会上传到服务器，确保安全性。

**Q: 支持哪些PDF格式？**  
A: 支持标准PDF格式，推荐使用文字型PDF。扫描版PDF识别效果可能不理想。

**Q: 处理速度慢怎么办？**  
A: 处理速度取决于PDF大小和复杂度。建议拆分大文件或在网络空闲时处理。

### 技术相关
**Q: 提取结果不准确？**  
A: 尝试调整提示词描述，提供更详细的字段定义和示例格式。

**Q: 批量处理中断？**  
A: 系统会保留已处理的结果，可以重新上传未完成的文件继续处理。

**Q: 内存占用过高？**  
A: 避免同时处理过多大文件，建议分批处理。

## 🤝 贡献指南

欢迎贡献代码、报告问题或提出改进建议：

1. **问题反馈**: 通过GitHub Issues报告bug或提出功能需求
2. **代码贡献**: Fork项目，创建特性分支，提交Pull Request
3. **文档改进**: 帮助完善文档和使用说明
4. **测试反馈**: 测试不同类型的PDF文件，反馈处理效果

详细贡献指南请参考 [CONTRIBUTING.md](./CONTRIBUTING.md)。

## 📄 许可证

本项目基于 [MIT许可证](./LICENSE) 开源。

## 📞 联系方式

- **项目地址**: https://github.com/your-username/pdf-gemini-processor
- **问题反馈**: GitHub Issues
- **功能建议**: GitHub Discussions

---

> **免责声明**: 本工具仅用于学习研究目的，请遵守相关法律法规和API使用条款。提取的数据仅供参考，不作为投资决策依据。
