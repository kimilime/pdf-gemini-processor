# PDF智能处理器

一个基于React和Gemini AI的PDF文档智能处理工具，专门用于提取年报中的高管薪酬等结构化数据。

## 功能特点

- 📄 **PDF文件上传**: 支持拖拽上传PDF文件
- 🤖 **AI智能处理**: 使用Google Gemini 2.0 Flash进行内容分析
- 📊 **表格数据展示**: 智能表格显示提取结果，支持排序、搜索、分页
- 💾 **数据导出**: 一键导出CSV格式数据
- 🎯 **自定义Prompt**: 支持自定义处理指令，内置多种预设模板
- 🔄 **避免上下文混淆**: 每次处理都创建新会话，解决长期使用导致的错乱问题

## 解决的问题

### Gemini 2.5 Pro长期使用出现错乱的原因：
1. **上下文累积问题** - 长时间会话导致上下文窗口溢出
2. **指令稀释** - 原始提示词被后续交互稀释
3. **模式冲突** - 处理不同格式文档时产生的混淆
4. **温度参数影响** - 长期使用后随机性增加

### 本应用的解决方案：
- ✅ 每次处理创建全新会话
- ✅ 标准化的Prompt模板
- ✅ 结构化的数据解析
- ✅ 友好的错误处理

## 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 获取Gemini API密钥
1. 访问 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 登录Google账户
3. 创建新的API密钥
4. 复制API密钥

### 3. 启动应用
```bash
npm run dev
```

### 4. 配置API密钥
- 点击右上角"API设置"按钮
- 输入您的Gemini API密钥
- 保存设置

### 5. 开始使用
1. 上传PDF文件（支持拖拽）
2. 选择或自定义处理指令
3. 点击"开始处理"
4. 查看结果表格
5. 导出数据（可选）

## 预设Prompt模板

### 高管薪酬提取
```
请提取PDF文件中高管薪酬相关的表格数据，包括姓名、职位、基本薪酬、奖金、股权激励等信息。请以JSON格式返回结构化数据。
```

### 财务数据提取
```
请提取PDF文件中的主要财务数据，包括营收、利润、资产负债等核心财务指标。请以JSON格式返回结构化数据。
```

### 股东信息提取
```
请提取PDF文件中的股东信息，包括股东名称、持股比例、股权变动等信息。请以JSON格式返回结构化数据。
```

## 技术架构

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **UI样式**: Tailwind CSS
- **表格组件**: TanStack Table
- **AI服务**: Google Gemini 2.5 Pro
- **图标库**: Lucide React

## 项目结构

```
src/
├── components/          # React组件
│   ├── FileUploader.tsx    # 文件上传组件
│   ├── PromptEditor.tsx    # Prompt编辑器
│   ├── ResultsTable.tsx   # 结果表格
│   └── ApiKeyModal.tsx    # API密钥设置
├── services/           # 服务层
│   └── geminiService.ts   # Gemini API服务
├── App.tsx            # 主应用组件
└── main.tsx          # 应用入口
```

## 最佳实践

### Prompt编写建议
1. **明确指定输出格式** - 始终要求JSON格式输出
2. **详细描述需求** - 明确说明需要提取的数据类型
3. **提供示例格式** - 给出期望的数据结构示例
4. **处理边界情况** - 说明没有数据时的处理方式

### 使用建议
1. **文件大小** - 建议PDF文件不超过100MB
2. **网络环境** - 确保网络连接稳定
3. **API配额** - 注意API使用限制
4. **数据验证** - 检查提取结果的准确性

## 常见问题

### Q: API密钥存储在哪里？
A: API密钥存储在浏览器的localStorage中，仅在本地保存。

### Q: 支持哪些PDF格式？
A: 支持标准PDF格式，建议使用文字型PDF而非扫描件。

### Q: 处理速度慢怎么办？
A: 处理速度取决于PDF大小和复杂度，建议耐心等待或分割大文件。

### Q: 提取结果不准确怎么办？
A: 尝试调整Prompt描述，提供更详细的提取要求。

## 开发

### 本地开发
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 代码检查
```bash
npm run lint
```

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。
